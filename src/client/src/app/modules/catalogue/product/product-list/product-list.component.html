<h3>Products</h3>
<table class="table table-sm table-striped">
  <thead>
    <tr>
      <th class="img"></th>
      <th>Name</th>
      <th>Supplier</th>
      <th>Group</th>
      <th>Uplift %</th>
      <th>Price</th>
      <th class="actions">
        <button type="button"
                class="btn btn-outline-secondary btn-sm"
                [routerLink]="['product']">
          <i class="bi-plus"></i>
        </button>
      </th>
    </tr>
  </thead>
  <tbody *ngIf="products.state.isInProgress()">
    <tr>
      <td colspan="7">
        <app-shared-in-progress></app-shared-in-progress>
      </td>
    </tr>
  </tbody>
  <tbody *ngIf="products.state.isError()">
    <tr>
      <td colspan="7">
        <app-shared-error></app-shared-error>
      </td>
    </tr>
  </tbody>
  <tbody *ngIf="products.state.isReady()">
    <tr *ngFor="let product of products.value">
      <td class="img">
        <app-server-image cssClass="table-image" [imageId]="product.value.mainImage || product.value.images[0] || undefined"></app-server-image>
      </td>
      <td><a [routerLink]="['product', product.value.id]">{{product.value.name}}</a></td>
      <td>
        <div *ngIf="product.value.supplier">
          <app-shared-in-progress *ngIf="suppliers.state.isInProgress()"></app-shared-in-progress>
          <app-shared-error *ngIf="suppliers.state.isError()"></app-shared-error>
          <div *ngIf="suppliers.state.isReady()">
            {{suppliers.value.get(product.value.supplier)?.name}}
          </div>
        </div>
      </td>
      <td>
        <div *ngIf="product.value.group">
          <app-shared-in-progress *ngIf="groups.state.isInProgress()"></app-shared-in-progress>
          <app-shared-error *ngIf="groups.state.isError()"></app-shared-error>
          <div *ngIf="groups.state.isReady()">
            {{groups.value.get(product.value.group)?.name}}
          </div>
        </div>
      </td>
      <td>{{product.value.uplift}}</td>
      <td>{{product.value.price}}</td>
      <td class="actions">
        <app-shared-error *ngIf="product.state.isError()" [message]="product.state.getMessage()"></app-shared-error>
        <button type="button"
                class="btn btn-outline-danger btn-sm"
                (click)="deleteProduct(product)"
                [disabled]="product.state.isInProgress()">
          <i class="bi-trash"></i>
        </button>
      </td>
    </tr>
  </tbody>
</table>
